<div class="dashboard-container">
  <app-loading *ngIf="isLoading"></app-loading>

  <div class="header">
    <h1>Dashboard</h1>
    <div class="upload-section">
      <input type="file" (change)="onFileSelected($event)" accept=".csv" #fileInputRef>
      <button (click)="uploadFile()" [disabled]="!selectedFile || isLoading">Upload CSV</button>
      <button (click)="logout()">Logout</button>
    </div>
  </div>

  <div *ngIf="uploadMessage" class="upload-message">{{ uploadMessage }}</div>

  <div class="keyword-list-container">
    <h2>Your Keywords ({{ totalKeywords }})</h2>
    <table class="keyword-table">
      <thead>
        <tr>
          <th>Keyword</th>
          <th>Status</th>
          <th>Uploaded At</th>
        </tr>
      </thead>
      <tbody @listAnimation *ngIf="keywords.length > 0">
        <tr *ngFor="let keyword of keywords">
          <td>{{ keyword.text }}</td>
          <td><span class="status-badge {{ keyword.status | lowercase }}">{{ keyword.status }}</span></td>
          <td>{{ keyword.createdAt | date:'short' }}</td>
        </tr>
        <tr *ngIf="keywords.length === 0">
          <td colspan="3" class="no-keywords">No keywords uploaded yet.</td>
        </tr>
      </tbody>
    </table>

    <div class="pagination" *ngIf="totalPages > 1">
      <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">Previous</button>
      <span *ngFor="let page of pages">
        <button (click)="goToPage(page)" [class.active]="page === currentPage">{{ page }}</button>
      </span>
      <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages">Next</button>
    </div>
  </div>
</div>